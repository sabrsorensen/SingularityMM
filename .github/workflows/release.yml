name: Build and Release Application

# Trigger the workflow when you push a tag (e.g., v1.0.0)
on:
  push:
    tags:
      - "v*"
  workflow_dispatch:
    inputs:
      tag_name:
        description: "Tag name for this release"
        required: true
        default: ""

jobs:
  build-all-platforms:
    name: Build All Platforms
    uses: ./.github/workflows/build.yml
    with:
      release: true
      tag_name: ${{ inputs.tag_name || github.ref_name }}
      targets: "windows,linux,flatpak"
    secrets: inherit
